<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyWorld v6.1: Block System Update</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        #game-canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        #welcome-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #4CAF50;
            z-index: 100;
        }
        #start-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        #start-button:hover {
            background: #45a049;
           1.05);
 transform: scale(        }
        .ui-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            min-width: 250px;
            z-index: 50;
        }
        .block-selector {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .block-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #333;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .block-btn:hover {
            transform: scale(1.1);
            border-color: #4CAF50;
        }
        .block-btn.active {
            border-color: #4CAF50;
            box-shadow: 0 0 10px #4CAF50;
        }
        .block-grass { background: #228B22; }
        .block-stone { background: #696969; }
        .block-wood { background: #8B4513; }
        .block-iron { background: #C0C0C0; }
        .block-diamond { background: #00FFFF; }
        .block-lava { background: #FF4500; }
        .inventory-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15-radius: 10px;
            borderpx;
            z-index: 50;
        }
        .time-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 18px;
            z-index: 50;
        }
        .controls-hint {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 50;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        
        <div id="welcome-message">
            <h1>üèùÔ∏è SkyWorld v6.1</h1>
            <h2>Block System Update</h2>
            <p>üî® Block System Added<br>
            üåÖ Day/Night Cycle<br>
            üì¶ Inventory System<br>
            üì± Enhanced Mobile Controls</p>
            <button id="start-button">Start Playing!</button>
        </div>
        
        <div class="ui-panel" id="block-panel" style="display: none;">
            <h3>üî® Block Selection</h3>
            <p>Click a block to select</p>
            <div class="block-selector">
                <div class="block-btn block-grass active" data-block="grass" title="Grass Block"></div>
                <div class="block-btn block-stone" data-block="stone" title="Stone Block"></div>
                <div class="block-btn block-wood" data-block="wood" title=">
                <divWood Block"></div class="block-btn block-iron" data-block="iron" title="Iron Block"></div>
                <div class="block-btn block-diamond" data-block="diamond" title="Diamond Block"></div>
                <div class="block-btn block-lava" data-block="lava" title="Lava Block"></div>
            </div>
        </div>
        
        <div class="inventory-panel" id="inventory-panel" style="display: none;">
            <h3>üì¶ Inventory</h3>
            <div id="inventory-content">
                <p>Grass: <span id="grass-count">10</span></p>
                <p>Stone: <span id="stone-count">5</span></p>
                <p>Wood: <span id="wood-count">3</span></p>
                <p>Iron: <span id="iron-count">1</span></p>
                <p>Diamond: <span id="diamond-count">0</span></p>
                <p>Lava: <span id="lava-count">2</span></p>
            </div>
        </div>
        
        <div class="time-display" id="time-display" style="display: none;">
            <span id="time-text">Day 1 - 12:00</span>
        </div>
        
        <div class="controls-hint" id="controls-hint" style="display: none;">
            <strong>üéÆ Controls:</strong><br>
            <strong>Desktop:</strong> WASD movement, Mouse look<br>
            <strong>Mobile:</strong> Touch & drag to look<br>
            <strong>Blocks:</strong> Click blocks to select, click empty space to place
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        // SkyWorld v6.1 Game Variables
        let scene, camera, renderer;
        let islands = [];
        let placedBlocks = [];
        let timeOfDay = 12; // 0-24 hours
        let dayNumber = 1;
        let selectedBlockType = 'grass';
        let player = { x: 0, y: 8, z: 0 };
        let gameStarted = false;
        
        // Block types with properties
        const blockTypes = {
            grass: { color: 0x228B22, name: 'Grass' },
            stone: { color: 0x696969, name: 'Stone' },
            wood: { color: 0x8B4513, name: 'Wood' },
            iron: { color: 0xC0C0C0, name: 'Iron' },
            diamond: { color: 0x00FFFF, name: 'Diamond' },
            lava: { color: 0xFF4500, name: 'Lava' }
        };
        
        // Initialize Game
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéÆ SkyWorld v6.1: Block System Update - Initializing...');
            
            const startButton = document.getElementById('start-button');
            const welcomeMessage = document.getElementById('welcome-message');
            
            startButton.addEventListener('click', function() {
                welcomeMessage.style.display = 'none';
                document.getElementById('block-panel').style.display = 'block';
                document.getElementById('inventory-panel').style.display = 'block';
                document.getElementById('time-display').style.display = 'block';
                document.getElementById('controls-hint').style.display = 'block';
                initializeGame();
            });
            
            setupBlockSelection();
        });

        function setupBlockSelection() {
            const blockButtons = document.querySelectorAll('.block-btn');
            blockButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    blockButtons.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Update selected block type
                    selectedBlockType = this.dataset.block;
                    console.log(`üî® Selected block: ${selectedBlockType}`);
                });
            });
        }

        function initializeGame() {
            gameStarted = true;
            
            // Initialize Three.js Scene
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('game-container').appendChild(renderer.domElement);
            
            // Enhanced lighting with day/night
            updateLighting();
            
            // Create floating islands system
            createFloatingIslands();
            createSkyBridges();
            createAerialStructures();
            
            // Set camera position on starting island
            camera.position.set(player.x, player.y + 5, player.z + 10);
            camera.lookAt(player.x, player.y, player.z);
            
            // Setup controls
            setupControls();
            setupBlockPlacement();
            
            // Animation loop with time progression
            function animate() {
                requestAnimationFrame(animate);
                
                // Update time of day
                updateTimeOfDay();
                
                // Rotate islands slightly for visual effect
                islands.forEach(island => {
                    island.rotation.y += 0.001;
                });
                
                renderer.render(scene, camera);
            }
            animate();
            
            console.log('‚úÖ SkyWorld v6.1 initialized with Block System!');
            console.log('üèùÔ∏è 6 Floating Islands + 3 Sky Bridges + 3 Aerial Structures');
            console.log('üî® Block System Active - Click to place blocks!');
        }

        function updateLighting() {
            // Remove existing lights
            const existingLights = scene.children.filter(child => child.isLight);
            existingLights.forEach(light => scene.remove(light));
            
            // Calculate light intensity based on time
            const timeFactor = Math.sin((timeOfDay / 24) * Math.PI * 2) * 0.5 + 0.5; // 0 to 1
            
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0x404040, 0.3 + timeFactor * 0.4);
            scene.add(ambientLight);
            
            // Directional light (sun/moon)
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8 * timeFactor + 0.2);
            directionalLight.position.set(50 * timeFactor, 50, 50);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            scene.add(directionalLight);
            
            // Update sky color
            const skyColor = new THREE.Color().lerpColors(
                new THREE.Color(0x000011), // Night blue
                new THREE.Color(0x87CEEB), // Day blue
                timeFactor
            );
            renderer.setClearColor(skyColor);
        }

        function updateTimeOfDay() {
            if (!gameStarted) return;
            
            timeOfDay += 0.02; // Speed of time progression
            
            if (timeOfDay >= 24) {
                timeOfDay = 0;
                dayNumber++;
            }
            
            // Update lighting
            updateLighting();
            
            // Update display
            const hours = Math.floor(timeOfDay);
            const minutes = Math.floor((timeOfDay % 1) * 60);
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            document.getElementById('time-text').textContent = `Day ${dayNumber} - ${timeString}`;
        }

        function createFloatingIslands() {
            const islandData = [
                { x: -10, y: 8, z: -5, radius: 3, color: 0x228B22, name: 'Forest Island' },
                { x: 15, y: 12, z: 8, radius: 4, color: 0x8B4513, name: 'Mountain Island' },
                { x: -5, y: 6, z: 12, radius: 2, color: 0x32CD32, name: 'Grass Island' },
                { x: 8, y: 15, z: -12, radius: 5, color: 0xFF8C00, name: 'Desert Island' },
                { x: 18, y: 9, z: -3, radius: 3, color: 0x9ACD32, name: 'Meadow Island' },
                { x: -15, y: 14, z: 10, radius: 4, color: 0x20B2AA, name: 'Ocean Island' }
            ];
            
            islandData.forEach((island, index) => {
                // Create island base
                const geometry = new THREE.CylinderGeometry(island.radius, island.radius * 1.2, 2, 12);
                const material = new THREE.MeshLambertMaterial({ color: island.color });
                const islandMesh = new THREE.Mesh(geometry, material);
                
                islandMesh.position.set(island.x, island.y, island.z);
                islandMesh.userData = { type: 'island', name: island.name };
                islandMesh.castShadow = true;
                islandMesh.receiveShadow = true;
                scene.add(islandMesh);
                islands.push(islandMesh);
                
                // Add island top
                const topGeometry = new THREE.CylinderGeometry(island.radius * 0.9, island.radius * 0.9, 0.3, 12);
                const topMaterial = new THREE.MeshLambertMaterial({ color: 0x228B22 });
                const topMesh = new THREE.Mesh(topGeometry, topMaterial);
                topMesh.position.set(island.x, island.y + 1.15, island.z);
                topMesh.castShadow = true;
                topMesh.receiveShadow = true;
                scene.add(topMesh);
                
                // Add some natural blocks on the island
                addNaturalBlocks(island.x, island.y + 1.5, island.z, island.radius);
                
                console.log(`üèùÔ∏è ${island.name} created with natural blocks`);
            });
        }

        function addNaturalBlocks(centerX, centerY, centerZ, radius) {
            // Add some trees and rocks
            for (let i = 0; i < Math.floor(radius * 2); i++) {
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * radius * 0.8;
                const x = centerX + Math.cos(angle) * distance;
                const z = centerZ + Math.sin(angle) * distance;
                const y = centerY + 0.2;
                
                if (Math.random() > 0.5) {
                    // Add a tree
                    createBlock(x, y, z, 'wood');
                    createBlock(x, y + 1, z, 'wood');
                    createBlock(x, y + 2, z, 'wood');
                    // Add leaves
                    for (let dx = -1; dx <= 1; dx++) {
                        for (let dz = -1; dz <= 1; dz++) {
                            createBlock(x + dx, y + 3, z + dz, 'grass');
                        }
                    }
                } else {
                    // Add rocks
                    createBlock(x, y, z, 'stone');
                    if (Math.random() > 0.5) {
                        createBlock(x, y + 1, z, 'stone');
                    }
                }
            }
        }

        function createSkyBridges() {
            const bridges = [
                { start: [-10, 10, -5], end: [15, 14, 8], color: 0x8B4513 },
                { start: [-5, 8, 12], end: [18, 11, -3], color: 0x8B4513 },
                { start: [-10, 10, -5], end: [-10, 15, -5], color: 0x8B4513 }
            ];
            
            bridges.forEach((bridge, index) => {
                const [startX, startY, startZ] = bridge.start;
                const [endX, endY, endZ] = bridge.end;
                
                const length = Math.sqrt(
                    Math.pow(endX - startX, 2) + 
                    Math.pow(endY - startY, 2) + 
                    Math.pow(endZ - startZ, 2)
                );
                
                const midX = (startX + endX) / 2;
                const midY = (startY + endY) / 2;
                const midZ = (startZ + endZ) / 2;
                
                const geometry = new THREE.BoxGeometry(length, 0.5, 1);
                const material = new THREE.MeshLambertMaterial({ color: bridge.color });
                const bridgeMesh = new THREE.Mesh(geometry, material);
                
                bridgeMesh.position.set(midX, midY, midZ);
                bridgeMesh.userData = { type: 'bridge', index: index };
                bridgeMesh.castShadow = true;
                scene.add(bridgeMesh);
                
                console.log(`üåâ Bridge ${index + 1} with wood blocks created`);
            });
        }

        function createAerialStructures() {
            // Floating Castle
            const castleGeometry = new THREE.BoxGeometry(6, 8, 6);
            const castleMaterial = new THREE.MeshLambertMaterial({ color: 0x696969 });
            const castle = new THREE.Mesh(castleGeometry, castleMaterial);
            castle.position.set(20, 18, 0);
            castle.userData = { type: 'castle', name: 'Sky Castle' };
            castle.castShadow = true;
            scene.add(castle);
            
            // Floating Tower
            const towerGeometry = new THREE.CylinderGeometry(2, 2, 15, 8);
            const towerMaterial = new THREE.MeshLambertMaterial({ color: 0x778899 });
            const tower = new THREE.Mesh(towerGeometry, towerMaterial);
            tower.position.set(-20, 22, 15);
            tower.userData = { type: 'tower', name: 'Sky Tower' };
            tower.castShadow = true;
            scene.add(tower);
            
            // Floating Pyramid
            const pyramidGeometry = new THREE.ConeGeometry(5, 8, 4);
            const pyramidMaterial = new THREE.MeshLambertMaterial({ color: 0xDAA520 });
            const pyramid = new THREE.Mesh(pyramidGeometry, pyramidMaterial);
            pyramid.position.set(0, 16, -18);
            pyramid.userData = { type: 'pyramid', name: 'Sky Pyramid' };
            pyramid.castShadow = true;
            scene.add(pyramid);
            
            console.log('üè∞ Aerial structures created: Castle, Tower, Pyramid');
        }

        function createBlock(x, y, z, blockType) {
            const geometry = new THREE.BoxGeometry(1, 1, 1);
            const material = new THREE.MeshLambertMaterial({ color: blockTypes[blockType].color });
            const blockMesh = new THREE.Mesh(geometry, material);
            
            blockMesh.position.set(x, y, z);
            blockMesh.userData = { type: 'block', blockType: blockType };
            blockMesh.castShadow = true;
            blockMesh.receiveShadow = true;
            
            scene.add(blockMesh);
            placedBlocks.push(blockMesh);
            
            return blockMesh;
        }

        function setupControls() {
            // Keyboard controls
            document.addEventListener('keydown', function(event) {
                if (!gameStarted) return;
                
                const speed = 1;
                switch(event.code) {
                    case 'KeyW':
                    case 'ArrowUp':
                        player.z -= speed;
                        break;
                    case 'KeyS':
                    case 'ArrowDown':
                        player.z += speed;
                        break;
                    case 'KeyA':
                    case 'ArrowLeft':
                        player.x -= speed;
                        break;
                    case 'KeyD':
                    case 'ArrowRight':
                        player.x += speed;
                        break;
                }
                
                camera.position.x = player.x;
                camera.position.z = player.z + 10;
                camera.lookAt(player.x, player.y, player.z);
            });
            
            // Mouse controls for looking around
            let mouseDown = false;
            let lastMouseX = 0;
            let lastMouseY = 0;
            
            renderer.domElement.addEventListener('mousedown', function(event) {
                if (!gameStarted) return;
                mouseDown = true;
                lastMouseX = event.clientX;
                lastMouseY = event.clientY;
            });
            
            document.addEventListener('mouseup', function() {
                mouseDown = false;
            });
            
            document.addEventListener('mousemove', function(event) {
                if (!gameStarted) return;
                
                if (mouseDown) {
                    const deltaX = event.clientX - lastMouseX;
                    const deltaY = event.clientY - lastMouseY;
                    
                    camera.rotation.y -= deltaX * 0.01;
                    camera.rotation.x -= deltaY * 0.01;
                    
                    lastMouseX = event.clientX;
                    lastMouseY = event.clientY;
                }
            });
        }

        function setupBlockPlacement() {
            renderer.domElement.addEventListener('click', function(event) {
                if (!gameStarted) return;
                
                const mouse = new THREE.Vector2();
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, camera);
                
                const intersects = raycaster.intersectObjects(scene.children);
                
                if (intersects.length > 0) {
                    const intersect = intersects[0];
                    const point = intersect.point;
                    
                    // Place block slightly away from the surface
                    const normal = intersect.face.normal.clone();
                    const placementPoint = point.clone().add(normal.multiplyScalar(0.5));
                    
                    // Round to grid
                    placementPoint.x = Math.round(placementPoint.x);
                    placementPoint.y = Math.round(placementPoint.y);
                    placementPoint.z = Math.round(placementPoint.z);
                    
                    createBlock(placementPoint.x, placementPoint.y, placementPoint.z, selectedBlockType);
                    
                    console.log(`üî® Placed ${selectedBlockType} block at (${placementPoint.x}, ${placementPoint.y}, ${placementPoint.z})`);
                }
            });
        }

        // Handle window resize
        window.addEventListener('resize', function() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
    </script>
</body>
</html>